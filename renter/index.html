<!DOCTYPE html>
<html lang="en" dir="ltr">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Dashboard - Doos Doos</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" type="image/x-icon" href="favicon.png" />
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;500;600;700;800&display=swap" rel="stylesheet" />
        <link rel="stylesheet" type="text/css" media="screen" href=" /assets/css/perfect-scrollbar.min.css" />
        <link rel="stylesheet" type="text/css" media="screen" href="/assets/css/file-upload-with-preview.min.css" />

        <link rel="stylesheet" type="text/css" media="screen" href=" /assets/css/style.css" />
        <link defer rel="stylesheet" type="text/css" media="screen" href=" /assets/css/animate.css" />
        <script src=" /assets/js/perfect-scrollbar.min.js"></script>
        <script defer src=" /assets/js/popper.min.js"></script>
    </head>

    <body
        x-data="main"
        class="relative overflow-x-hidden font-nunito text-sm font-normal antialiased"
        :class="[ $store.app.sidebar ? 'toggle-sidebar' : '', $store.app.theme === 'dark' || $store.app.isDarkMode ?  'dark' : '', $store.app.menu, $store.app.layout,$store.app.rtlClass]"
    >
        <!-- sidebar menu overlay -->
        <div x-cloak class="fixed inset-0 z-50 bg-[black]/60 lg:hidden" :class="{'hidden' : !$store.app.sidebar}" @click="$store.app.toggleSidebar()"></div>

        <!-- screen loader -->
        <div class="screen_loader animate__animated fixed inset-0 z-[60] grid place-content-center bg-[#fafafa] dark:bg-[#060818]">
            <svg width="64" height="64" viewBox="0 0 135 135" xmlns="http://www.w3.org/2000/svg" fill="#4361ee">
                <path
                    d="M67.447 58c5.523 0 10-4.477 10-10s-4.477-10-10-10-10 4.477-10 10 4.477 10 10 10zm9.448 9.447c0 5.523 4.477 10 10 10 5.522 0 10-4.477 10-10s-4.478-10-10-10c-5.523 0-10 4.477-10 10zm-9.448 9.448c-5.523 0-10 4.477-10 10 0 5.522 4.477 10 10 10s10-4.478 10-10c0-5.523-4.477-10-10-10zM58 67.447c0-5.523-4.477-10-10-10s-10 4.477-10 10 4.477 10 10 10 10-4.477 10-10z"
                >
                    <animateTransform attributeName="transform" type="rotate" from="0 67 67" to="-360 67 67" dur="2.5s" repeatCount="indefinite" />
                </path>
                <path
                    d="M28.19 40.31c6.627 0 12-5.374 12-12 0-6.628-5.373-12-12-12-6.628 0-12 5.372-12 12 0 6.626 5.372 12 12 12zm30.72-19.825c4.686 4.687 12.284 4.687 16.97 0 4.686-4.686 4.686-12.284 0-16.97-4.686-4.687-12.284-4.687-16.97 0-4.687 4.686-4.687 12.284 0 16.97zm35.74 7.705c0 6.627 5.37 12 12 12 6.626 0 12-5.373 12-12 0-6.628-5.374-12-12-12-6.63 0-12 5.372-12 12zm19.822 30.72c-4.686 4.686-4.686 12.284 0 16.97 4.687 4.686 12.285 4.686 16.97 0 4.687-4.686 4.687-12.284 0-16.97-4.685-4.687-12.283-4.687-16.97 0zm-7.704 35.74c-6.627 0-12 5.37-12 12 0 6.626 5.373 12 12 12s12-5.374 12-12c0-6.63-5.373-12-12-12zm-30.72 19.822c-4.686-4.686-12.284-4.686-16.97 0-4.686 4.687-4.686 12.285 0 16.97 4.686 4.687 12.284 4.687 16.97 0 4.687-4.685 4.687-12.283 0-16.97zm-35.74-7.704c0-6.627-5.372-12-12-12-6.626 0-12 5.373-12 12s5.374 12 12 12c6.628 0 12-5.373 12-12zm-19.823-30.72c4.687-4.686 4.687-12.284 0-16.97-4.686-4.686-12.284-4.686-16.97 0-4.687 4.686-4.687 12.284 0 16.97 4.686 4.687 12.284 4.687 16.97 0z"
                >
                    <animateTransform attributeName="transform" type="rotate" from="0 67 67" to="360 67 67" dur="8s" repeatCount="indefinite" />
                </path>
            </svg>
        </div>

        <!-- scroll to top button -->
        <div class="fixed bottom-6 z-50 ltr:right-6 rtl:left-6" x-data="scrollToTop">
            <template x-if="showTopButton">
                <button
                    type="button"
                    class="btn btn-outline-primary animate-pulse rounded-full bg-[#fafafa] p-2 dark:bg-[#060818] dark:hover:bg-primary"
                    @click="goToTop"
                >
                    <svg width="24" height="24" class="h-4 w-4" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            opacity="0.5"
                            fill-rule="evenodd"
                            clip-rule="evenodd"
                            d="M12 20.75C12.4142 20.75 12.75 20.4142 12.75 20L12.75 10.75L11.25 10.75L11.25 20C11.25 20.4142 11.5858 20.75 12 20.75Z"
                            fill="currentColor"
                        />
                        <path
                            d="M6.00002 10.75C5.69667 10.75 5.4232 10.5673 5.30711 10.287C5.19103 10.0068 5.25519 9.68417 5.46969 9.46967L11.4697 3.46967C11.6103 3.32902 11.8011 3.25 12 3.25C12.1989 3.25 12.3897 3.32902 12.5304 3.46967L18.5304 9.46967C18.7449 9.68417 18.809 10.0068 18.6929 10.287C18.5768 10.5673 18.3034 10.75 18 10.75L6.00002 10.75Z"
                            fill="currentColor"
                        />
                    </svg>
                </button>
            </template>
        </div>

        <!-- Theme Customizer -->
        <div id="theme-customizer-container"></div>

        <div class="main-container min-h-screen text-black dark:text-white-dark" :class="[$store.app.navbar]">
            <!-- Sidebar -->
            <div id="sidebar-container"></div>
            <div class="main-content flex min-h-screen flex-col">
                <!-- Header -->
                <div id="header-container"></div>
                <!-- end header section -->
                <!-- start main content section -->
                <div class="dvanimation animate__animated p-6" :class="[$store.app.animation]">
                    <!-- start main content section -->
                    <div x-data="sales">
                        <ul class="flex space-x-2 rtl:space-x-reverse">
                            <li>
                                <a href="javascript:;" class="text-primary hover:underline">Dashboard</a>
                            </li>
                            <li class="before:content-['/'] ltr:before:mr-1 rtl:before:ml-1">
                                <span>Home</span>
                            </li>
                        </ul>

                        <div class="pt-5">
                            <div class="mb-6 grid gap-6 xl:grid-cols-3">
                                <div class="panel h-full" x-data="sales">
                                    <div class="mb-5 flex items-center justify-between">
                                        <h5 class="text-lg font-semibold dark:text-white-light">Vendors Status</h5>
                                        <div class="flex items-center space-x-2">
                                            <span class="text-sm text-gray-500 dark:text-gray-400">Total:</span>
                                            <span class="font-bold" x-text="vendors.total"></span>
                                        </div>
                                    </div>
                                    <div class="grid grid-cols-3 gap-4">
                                        <div class="rounded-lg bg-[#f9f9f9] p-4 text-center dark:bg-[#1b2e4b]">
                                            <div class="mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-success/10 text-success">
                                                <span x-text="vendors.active"></span>
                                            </div>
                                            <p class="mt-2 text-sm font-medium">Active</p>
                                        </div>
                                        <div class="rounded-lg bg-[#f9f9f9] p-4 text-center dark:bg-[#1b2e4b]">
                                            <div class="mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-warning/10 text-warning">
                                                <span x-text="vendors.pending"></span>
                                            </div>
                                            <p class="mt-2 text-sm font-medium">Pending</p>
                                        </div>
                                        <div class="rounded-lg bg-[#f9f9f9] p-4 text-center dark:bg-[#1b2e4b]">
                                            <div class="mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-danger/10 text-danger">
                                                <span x-text="vendors.banned"></span>
                                            </div>
                                            <p class="mt-2 text-sm font-medium">Banned</p>
                                        </div>
                                    </div>
                                    <div class="mt-4 h-2 w-full rounded-full bg-gray-200 dark:bg-gray-700">
                                        <div class="flex h-full">
                                            <div
                                                class="bg-success"
                                                :style="'width: ' + (vendors.total ? (vendors.active / vendors.total * 100) + '%' : '0')"
                                            ></div>
                                            <div
                                                class="bg-warning"
                                                :style="'width: ' + (vendors.total ? (vendors.pending / vendors.total * 100) + '%' : '0')"
                                            ></div>
                                            <div
                                                class="bg-danger"
                                                :style="'width: ' + (vendors.total ? (vendors.banned / vendors.total * 100) + '%' : '0')"
                                            ></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="panel h-full">
                                    <div class="mb-5 flex items-center dark:text-white-light">
                                        <h5 class="text-lg font-semibold">Users Statistics</h5>
                                    </div>
                                    <div class="space-y-9" x-data="usersStats">
                                        <!-- Active Users -->
                                        <div class="flex items-center">
                                            <div class="h-9 w-9 ltr:mr-3 rtl:ml-3">
                                                <div
                                                    class="grid h-9 w-9 place-content-center rounded-full bg-success-light text-success dark:bg-success dark:text-success-light"
                                                >
                                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                        <path
                                                            d="M12 6C13.6569 6 15 4.65685 15 3C15 1.34315 13.6569 0 12 0C10.3431 0 9 1.34315 9 3C9 4.65685 10.3431 6 12 6Z"
                                                            fill="currentColor"
                                                        />
                                                        <path
                                                            d="M19 10C20.1046 10 21 9.10457 21 8C21 6.89543 20.1046 6 19 6C17.8954 6 17 6.89543 17 8C17 9.10457 17.8954 10 19 10Z"
                                                            fill="currentColor"
                                                        />
                                                        <path
                                                            d="M5 10C6.10457 10 7 9.10457 7 8C7 6.89543 6.10457 6 5 6C3.89543 6 3 6.89543 3 8C3 9.10457 3.89543 10 5 10Z"
                                                            fill="currentColor"
                                                        />
                                                        <path
                                                            opacity="0.5"
                                                            d="M12 24C14.1217 24 16.1566 23.1571 17.6569 21.6569C19.1571 20.1566 20 18.1217 20 16C20 13.8783 19.1571 11.8434 17.6569 10.3431C16.1566 8.84285 14.1217 8 12 8C9.87827 8 7.84344 8.84285 6.34315 10.3431C4.84285 11.8434 4 13.8783 4 16C4 18.1217 4.84285 20.1566 6.34315 21.6569C7.84344 23.1571 9.87827 24 12 24Z"
                                                            fill="currentColor"
                                                        />
                                                    </svg>
                                                </div>
                                            </div>
                                            <div class="flex-1">
                                                <div class="mb-2 flex font-semibold text-white-dark">
                                                    <h6>Active Users</h6>
                                                    <p class="ltr:ml-auto rtl:mr-auto" x-text="users.active || '0'"></p>
                                                </div>
                                                <div class="h-2 rounded-full bg-dark-light shadow dark:bg-[#1b2e4b]">
                                                    <div
                                                        class="h-full rounded-full bg-gradient-to-r from-[#00c6ff] to-[#0072ff]"
                                                        :style="'width: ' + (users.total ? Math.round((users.active / users.total) * 100) : '0') + '%'"
                                                    ></div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Inactive Users -->
                                        <div class="flex items-center">
                                            <div class="h-9 w-9 ltr:mr-3 rtl:ml-3">
                                                <div
                                                    class="grid h-9 w-9 place-content-center rounded-full bg-danger-light text-danger dark:bg-danger dark:text-danger-light"
                                                >
                                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                        <path
                                                            opacity="0.5"
                                                            d="M22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12Z"
                                                            fill="currentColor"
                                                        />
                                                        <path
                                                            d="M18.75 8C18.75 8.41421 18.4142 8.75 18 8.75C17.5858 8.75 17.25 8.41421 17.25 8C17.25 7.58579 17.5858 7.25 18 7.25C18.4142 7.25 18.75 7.58579 18.75 8Z"
                                                            fill="currentColor"
                                                        />
                                                        <path
                                                            d="M18.75 12C18.75 12.4142 18.4142 12.75 18 12.75C17.5858 12.75 17.25 12.4142 17.25 12C17.25 11.5858 17.5858 11.25 18 11.25C18.4142 11.25 18.75 11.5858 18.75 12Z"
                                                            fill="currentColor"
                                                        />
                                                        <path
                                                            d="M18.75 16C18.75 16.4142 18.4142 16.75 18 16.75C17.5858 16.75 17.25 16.4142 17.25 16C17.25 15.5858 17.5858 15.25 18 15.25C18.4142 15.25 18.75 15.5858 18.75 16Z"
                                                            fill="currentColor"
                                                        />
                                                    </svg>
                                                </div>
                                            </div>
                                            <div class="flex-1">
                                                <div class="mb-2 flex font-semibold text-white-dark">
                                                    <h6>Inactive Users</h6>
                                                    <p class="ltr:ml-auto rtl:mr-auto" x-text="users.inactive || '0'"></p>
                                                </div>
                                                <div class="h-2 w-full rounded-full bg-dark-light shadow dark:bg-[#1b2e4b]">
                                                    <div
                                                        class="h-full rounded-full bg-gradient-to-r from-[#ff416c] to-[#ff4b2b]"
                                                        :style="'width: ' + (users.total ? Math.round((users.inactive / users.total) * 100) : '0') + '%'"
                                                    ></div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Total Users -->
                                        <div class="flex items-center">
                                            <div class="h-9 w-9 ltr:mr-3 rtl:ml-3">
                                                <div
                                                    class="grid h-9 w-9 place-content-center rounded-full bg-info-light text-info dark:bg-info dark:text-info-light"
                                                >
                                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                        <path
                                                            opacity="0.5"
                                                            d="M22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12Z"
                                                            fill="currentColor"
                                                        />
                                                        <path
                                                            d="M12.75 9C12.75 8.58579 12.4142 8.25 12 8.25C11.5858 8.25 11.25 8.58579 11.25 9V11.25H9C8.58579 11.25 8.25 11.5858 8.25 12C8.25 12.4142 8.58579 12.75 9 12.75H11.25V15C11.25 15.4142 11.5858 15.75 12 15.75C12.4142 15.75 12.75 15.4142 12.75 15V12.75H15C15.4142 12.75 15.75 12.4142 15.75 12C15.75 11.5858 15.4142 11.25 15 11.25H12.75V9Z"
                                                            fill="currentColor"
                                                        />
                                                    </svg>
                                                </div>
                                            </div>
                                            <div class="flex-1">
                                                <div class="mb-2 flex font-semibold text-white-dark">
                                                    <h6>Total Users</h6>
                                                    <p class="ltr:ml-auto rtl:mr-auto" x-text="users.total || '0'"></p>
                                                </div>
                                                <div class="h-2 w-full rounded-full bg-dark-light shadow dark:bg-[#1b2e4b]">
                                                    <div class="h-full rounded-full bg-gradient-to-r from-[#4facfe] to-[#00f2fe]" style="width: 100%"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="panel h-full sm:col-span-3 xl:col-span-1" x-data="ordersStats">
                                    <div class="mb-5 flex items-center justify-between">
                                        <div>
                                            <h5 class="text-lg font-semibold dark:text-white-light">Orders Summary</h5>
                                            <p class="text-sm text-gray-500 dark:text-gray-400" x-text="'Total: ' + orders.total"></p>
                                        </div>
                                        <div class="relative">
                                            <div
                                                class="grid h-11 w-11 place-content-center rounded-full bg-[#ffeccb] text-warning dark:bg-warning dark:text-[#ffeccb]"
                                            >
                                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                    <path
                                                        d="M8 5H6C4.34315 5 3 6.34315 3 8V18C3 19.6569 4.34315 21 6 21H18C19.6569 21 21 19.6569 21 18V8C21 6.34315 19.6569 5 18 5H16"
                                                        stroke="currentColor"
                                                        stroke-width="1.5"
                                                        stroke-linecap="round"
                                                    />
                                                    <path
                                                        d="M16 3H8C5.79086 3 4 4.79086 4 7C4 9.20914 5.79086 11 8 11H16C18.2091 11 20 9.20914 20 7C20 4.79086 18.2091 3 16 3Z"
                                                        stroke="currentColor"
                                                        stroke-width="1.5"
                                                        stroke-linecap="round"
                                                    />
                                                </svg>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="overflow-hidden">
                                        <div x-ref="ordersChart" class="rounded-lg bg-white dark:bg-black"></div>
                                    </div>
                                    <div class="mt-4 grid grid-cols-3 gap-2 text-center">
                                        <div class="rounded border border-success/20 p-2 text-success">
                                            <div class="text-lg font-bold" x-text="orders.completed"></div>
                                            <div class="text-xs">Completed</div>
                                        </div>
                                        <div class="rounded border border-warning/20 p-2 text-warning">
                                            <div class="text-lg font-bold" x-text="orders.pending"></div>
                                            <div class="text-xs">Pending</div>
                                        </div>
                                        <div class="rounded border border-danger/20 p-2 text-danger">
                                            <div class="text-lg font-bold" x-text="orders.cancelled"></div>
                                            <div class="text-xs">Cancelled</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="panel h-full sm:col-span-3 xl:col-span-2">
                                    <div class="mb-5 flex items-start justify-between">
                                        <h5 class="text-lg font-semibold dark:text-white-light">Service Providers Status</h5>
                                    </div>
                                    <div class="flex flex-col space-y-5" x-data="serviceProvidersStats">
                                        <!-- Active Providers -->
                                        <div class="flex items-center">
                                            <div class="h-9 w-9">
                                                <div
                                                    class="flex h-9 w-9 items-center justify-center rounded-xl bg-primary/10 text-primary dark:bg-primary dark:text-white-light"
                                                >
                                                    <svg
                                                        xmlns="http://www.w3.org/2000/svg"
                                                        width="20"
                                                        height="20"
                                                        viewBox="0 0 24 24"
                                                        fill="none"
                                                        stroke="currentColor"
                                                        stroke-width="2"
                                                        stroke-linecap="round"
                                                        stroke-linejoin="round"
                                                    >
                                                        <path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"></path>
                                                        <path d="M19 10v2a7 7 0 0 1-14 0v-2"></path>
                                                        <line x1="12" y1="19" x2="12" y2="22"></line>
                                                    </svg>
                                                </div>
                                            </div>
                                            <div class="w-full flex-initial px-3">
                                                <div class="w-summary-info mb-1 flex justify-between font-semibold text-white-dark">
                                                    <span x-text="'Active: ' + serviceProviders.active"></span>
                                                    <p
                                                        class="text-xs ltr:ml-auto rtl:mr-auto"
                                                        x-text="calculatePercentage(serviceProviders.active, serviceProviders.total) + '%'"
                                                    ></p>
                                                </div>
                                                <div>
                                                    <div
                                                        class="h-5 w-full overflow-hidden rounded-full bg-dark-light p-1 shadow-3xl dark:bg-dark-light/10 dark:shadow-none"
                                                    >
                                                        <div
                                                            class="relative h-full w-full rounded-full bg-gradient-to-r from-[#009ffd] to-[#2a2a72] before:absolute before:inset-y-0 before:m-auto before:h-2 before:w-2 before:rounded-full before:bg-white ltr:before:right-0.5 rtl:before:left-0.5"
                                                            :style="'width: ' + calculatePercentage(serviceProviders.active, serviceProviders.total) + '%'"
                                                        ></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Pending Providers -->
                                        <div class="flex items-center">
                                            <div class="h-9 w-9">
                                                <div
                                                    class="flex h-9 w-9 items-center justify-center rounded-xl bg-warning/10 text-warning dark:bg-warning dark:text-white-light"
                                                >
                                                    <svg
                                                        xmlns="http://www.w3.org/2000/svg"
                                                        width="20"
                                                        height="20"
                                                        viewBox="0 0 24 24"
                                                        fill="none"
                                                        stroke="currentColor"
                                                        stroke-width="2"
                                                        stroke-linecap="round"
                                                        stroke-linejoin="round"
                                                    >
                                                        <circle cx="12" cy="12" r="10"></circle>
                                                        <line x1="12" y1="8" x2="12" y2="12"></line>
                                                        <line x1="12" y1="16" x2="12.01" y2="16"></line>
                                                    </svg>
                                                </div>
                                            </div>
                                            <div class="w-full flex-initial px-3">
                                                <div class="w-summary-info mb-1 flex justify-between font-semibold text-white-dark">
                                                    <span x-text="'Pending: ' + serviceProviders.pending"></span>
                                                    <p
                                                        class="text-xs ltr:ml-auto rtl:mr-auto"
                                                        x-text="calculatePercentage(serviceProviders.pending, serviceProviders.total) + '%'"
                                                    ></p>
                                                </div>
                                                <div>
                                                    <div
                                                        class="h-5 w-full overflow-hidden rounded-full bg-dark-light p-1 shadow-3xl dark:bg-dark-light/10 dark:shadow-none"
                                                    >
                                                        <div
                                                            class="relative h-full w-full rounded-full bg-gradient-to-r from-[#fe5f75] to-[#fc9842] before:absolute before:inset-y-0 before:m-auto before:h-2 before:w-2 before:rounded-full before:bg-white ltr:before:right-0.5 rtl:before:left-0.5"
                                                            :style="'width: ' + calculatePercentage(serviceProviders.pending, serviceProviders.total) + '%'"
                                                        ></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Banned Providers -->
                                        <div class="flex items-center">
                                            <div class="h-9 w-9">
                                                <div
                                                    class="flex h-9 w-9 items-center justify-center rounded-xl bg-danger/10 text-danger dark:bg-danger dark:text-white-light"
                                                >
                                                    <svg
                                                        xmlns="http://www.w3.org/2000/svg"
                                                        width="20"
                                                        height="20"
                                                        viewBox="0 0 24 24"
                                                        fill="none"
                                                        stroke="currentColor"
                                                        stroke-width="2"
                                                        stroke-linecap="round"
                                                        stroke-linejoin="round"
                                                    >
                                                        <circle cx="12" cy="12" r="10"></circle>
                                                        <line x1="4.93" y1="4.93" x2="19.07" y2="19.07"></line>
                                                    </svg>
                                                </div>
                                            </div>
                                            <div class="w-full flex-initial px-3">
                                                <div class="w-summary-info mb-1 flex justify-between font-semibold text-white-dark">
                                                    <span x-text="'Banned: ' + serviceProviders.banned"></span>
                                                    <p
                                                        class="text-xs ltr:ml-auto rtl:mr-auto"
                                                        x-text="calculatePercentage(serviceProviders.banned, serviceProviders.total) + '%'"
                                                    ></p>
                                                </div>
                                                <div>
                                                    <div
                                                        class="h-5 w-full overflow-hidden rounded-full bg-dark-light p-1 shadow-3xl dark:bg-dark-light/10 dark:shadow-none"
                                                    >
                                                        <div
                                                            class="relative h-full w-full rounded-full bg-gradient-to-r from-[#a71d31] to-[#3f0d12] before:absolute before:inset-y-0 before:m-auto before:h-2 before:w-2 before:rounded-full before:bg-white ltr:before:right-0.5 rtl:before:left-0.5"
                                                            :style="'width: ' + calculatePercentage(serviceProviders.banned, serviceProviders.total) + '%'"
                                                        ></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div
                                    x-data="commissionsStats"
                                    class="panel relative grid h-full grid-cols-1 content-between overflow-hidden before:absolute before:-right-44 before:bottom-0 before:top-0 before:m-auto before:h-96 before:w-96 before:rounded-full before:bg-[#1937cc]"
                                    style="background: linear-gradient(0deg, #00c6fb -227%, #005bea)"
                                >
                                    <div class="absolute -right-20 bottom-0 top-0 m-auto h-80 w-80 rounded-full bg-[#1947ee] opacity-30"></div>

                                    <div class="z-[7] mb-8 flex items-start justify-between text-white-light">
                                        <div>
                                            <h5 class="text-lg font-semibold">Commissions Summary</h5>
                                            <p class="mt-1 text-sm opacity-80">Pending & Total Commissions</p>
                                        </div>
                                        <div class="text-right">
                                            <div class="text-2xl font-bold" x-text="'$' + commissions.total.toLocaleString()"></div>
                                            <div class="text-sm" x-text="'Pending: $' + commissions.pending.toLocaleString()"></div>
                                        </div>
                                    </div>

                                    <div class="z-10 mt-6">
                                        <div class="mb-2 flex items-center justify-between text-white-light">
                                            <span>Collection Progress</span>
                                            <span x-text="calculatePercentage(commissions.pending, commissions.total) + '%'"></span>
                                        </div>
                                        <div class="h-3 w-full rounded-full bg-white/20">
                                            <div
                                                class="h-full rounded-full bg-white"
                                                :style="'width: ' + (commissions.total > 0 ? 100 - calculatePercentage(commissions.pending, commissions.total) : 0) + '%'"
                                            ></div>
                                        </div>

                                        <div class="mt-6 flex justify-between text-white-light">
                                            <div class="text-center">
                                                <div class="text-xl font-bold" x-text="commissions.total"></div>
                                                <div class="text-xs opacity-80">Total</div>
                                            </div>
                                            <div class="text-center">
                                                <div class="text-xl font-bold" x-text="commissions.pending"></div>
                                                <div class="text-xs opacity-80">Pending</div>
                                            </div>
                                            <div class="text-center">
                                                <div class="text-xl font-bold" x-text="commissions.total - commissions.pending"></div>
                                                <div class="text-xs opacity-80">Collected</div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- أيقونة توضيحية -->
                                    <div class="absolute bottom-6 right-6 z-0 opacity-20">
                                        <svg width="64" height="64" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M9 14L15 8" stroke="white" stroke-width="2" stroke-linecap="round" />
                                            <path d="M9 8.5L13 12.5" stroke="white" stroke-width="2" stroke-linecap="round" />
                                            <path
                                                d="M4 6C4 4.89543 4.89543 4 6 4H18C19.1046 4 20 4.89543 20 6V18C20 19.1046 19.1046 20 18 20H6C4.89543 20 4 19.1046 4 18V6Z"
                                                stroke="white"
                                                stroke-width="2"
                                            />
                                        </svg>
                                    </div>
                                </div>
                            </div>
                            <div class="panel mt-6" x-data="productsStats">
                                <div class="mb-5 flex items-center justify-between">
                                    <h5 class="text-lg font-semibold dark:text-white-light">Products Statistics</h5>
                                    <div class="relative">
                                        <div
                                            class="grid h-11 w-11 place-content-center rounded-full bg-[#e2f5ff] text-primary dark:bg-primary dark:text-[#e2f5ff]"
                                        >
                                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M4 6H20" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
                                                <path d="M4 12H20" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
                                                <path d="M4 18H20" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
                                            </svg>
                                        </div>
                                    </div>
                                </div>
                                <div class="grid grid-cols-1 gap-6 sm:grid-cols-2 xl:grid-cols-4">
                                    <div class="rounded-lg bg-[#f9f9f9] p-5 dark:bg-[#1b2e4b]">
                                        <div class="flex items-center justify-between">
                                            <div>
                                                <h6 class="text-sm font-semibold text-[#515365] dark:text-white-light">Total Products</h6>
                                                <p class="mt-2 text-2xl font-bold" x-text="products.total || '0'"></p>
                                            </div>
                                            <div class="rounded-full bg-[#e2f5ff] p-3 dark:bg-primary/20">
                                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M12 6V18" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
                                                    <path
                                                        d="M15 9.5C15 8.11929 13.6569 7 12 7C10.3431 7 9 8.11929 9 9.5C9 10.8807 10.3431 12 12 12C13.6569 12 15 13.1193 15 14.5C15 15.8807 13.6569 17 12 17C10.3431 17 9 15.8807 9 14.5"
                                                        stroke="currentColor"
                                                        stroke-width="1.5"
                                                        stroke-linecap="round"
                                                    />
                                                </svg>
                                            </div>
                                        </div>
                                        <div class="mt-4 h-2 rounded-full bg-white dark:bg-dark">
                                            <div class="h-full rounded-full bg-gradient-to-r from-[#00c6fb] to-[#005bea]" style="width: 100%"></div>
                                        </div>
                                    </div>

                                    <div class="rounded-lg bg-[#f9f9f9] p-5 dark:bg-[#1b2e4b]">
                                        <div class="flex items-center justify-between">
                                            <div>
                                                <h6 class="text-sm font-semibold text-[#515365] dark:text-white-light">Active Products</h6>
                                                <p class="mt-2 text-2xl font-bold" x-text="products.active !== 'not yet' ? products.active : '0'"></p>
                                            </div>
                                            <div class="rounded-full bg-[#e7f7ef] p-3 dark:bg-success/20">
                                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M4 12H20" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
                                                    <path
                                                        d="M8 8L4 12L8 16"
                                                        stroke="currentColor"
                                                        stroke-width="1.5"
                                                        stroke-linecap="round"
                                                        stroke-linejoin="round"
                                                    />
                                                </svg>
                                            </div>
                                        </div>
                                        <div class="mt-4 h-2 rounded-full bg-white dark:bg-dark">
                                            <div
                                                class="h-full rounded-full bg-gradient-to-r from-[#00e396] to-[#00a152]"
                                                :style="'width: ' + (products.total > 0 ? Math.round((parseInt(products.active !== 'not yet' ? products.active : 0) / products.total) * 100) : 0) + '%'"
                                            ></div>
                                        </div>
                                    </div>

                                    <div class="rounded-lg bg-[#f9f9f9] p-5 dark:bg-[#1b2e4b]">
                                        <div class="flex items-center justify-between">
                                            <div>
                                                <h6 class="text-sm font-semibold text-[#515365] dark:text-white-light">Inactive Products</h6>
                                                <p class="mt-2 text-2xl font-bold" x-text="products.inactive !== 'not yet' ? products.inactive : '0'"></p>
                                            </div>
                                            <div class="rounded-full bg-[#ffeded] p-3 dark:bg-danger/20">
                                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M4 12H20" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
                                                    <path
                                                        d="M16 8L20 12L16 16"
                                                        stroke="currentColor"
                                                        stroke-width="1.5"
                                                        stroke-linecap="round"
                                                        stroke-linejoin="round"
                                                    />
                                                </svg>
                                            </div>
                                        </div>
                                        <div class="mt-4 h-2 rounded-full bg-white dark:bg-dark">
                                            <div
                                                class="h-full rounded-full bg-gradient-to-r from-[#ff416c] to-[#ff4b2b]"
                                                :style="'width: ' + (products.total > 0 ? Math.round((parseInt(products.inactive !== 'not yet' ? products.inactive : 0) / products.total) * 100) : 0) + '%'"
                                            ></div>
                                        </div>
                                    </div>

                                    <div class="rounded-lg bg-[#f9f9f9] p-5 dark:bg-[#1b2e4b]">
                                        <div class="flex items-center justify-between">
                                            <div>
                                                <h6 class="text-sm font-semibold text-[#515365] dark:text-white-light">Providers by Type</h6>
                                                <p class="mt-2 text-xl">
                                                    <span class="font-bold" x-text="products.byProviderType.product_providers || '0'"></span>
                                                    <span class="mx-1">|</span>
                                                    <span class="font-bold" x-text="products.byProviderType.service_providers || '0'"></span>
                                                </p>
                                                <p class="text-xs text-gray-500 dark:text-gray-400">Product | Service</p>
                                            </div>
                                            <div class="rounded-full bg-[#fff4ed] p-3 dark:bg-warning/20">
                                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M12 6V18" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
                                                    <path
                                                        d="M15 9.5C15 8.11929 13.6569 7 12 7C10.3431 7 9 8.11929 9 9.5C9 10.8807 10.3431 12 12 12C13.6569 12 15 13.1193 15 14.5C15 15.8807 13.6569 17 12 17C10.3431 17 9 15.8807 9 14.5"
                                                        stroke="currentColor"
                                                        stroke-width="1.5"
                                                        stroke-linecap="round"
                                                    />
                                                </svg>
                                            </div>
                                        </div>
                                        <div class="mt-4 flex h-2 space-x-1">
                                            <div
                                                class="h-full rounded-full bg-gradient-to-r from-[#7579ff] to-[#b224ef]"
                                                :style="'width: ' + (products.byProviderType.product_providers / (products.byProviderType.product_providers + products.byProviderType.service_providers) * 100 || 0) + '%'"
                                            ></div>
                                            <div
                                                class="h-full rounded-full bg-gradient-to-r from-[#ffb800] to-[#ff7a00]"
                                                :style="'width: ' + (products.byProviderType.service_providers / (products.byProviderType.product_providers + products.byProviderType.service_providers) * 100 || 0) + '%'"
                                            ></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- end main content section -->

                <!-- start footer section -->
                <div class="mt-auto p-6 text-center dark:text-white-dark ltr:sm:text-left rtl:sm:text-right">
                    © <span id="footer-year">2025</span>. Developed By High Level Technology.
                </div>
                <!-- end footer section -->
            </div>
        </div>

        <script src=" /assets/js/alpine-collaspe.min.js"></script>
        <script src=" /assets/js/alpine-persist.min.js"></script>
        <script defer src=" /assets/js/alpine-ui.min.js"></script>
        <script defer src=" /assets/js/alpine-focus.min.js"></script>
        <script defer src=" /assets/js/alpine.min.js"></script>
        <script src=" /assets/js/custom.js"></script>
        <script src=" /assets/js/config.js"></script>
        <script defer src=" /assets/js/sweetalert.min.js"></script>
        <script src=" /assets/js/simple-datatables.js"></script>
        <script src=" /assets/js/apexcharts.js"></script>
        <script src="components/Header/Header.js"></script>
        <script src="components/Sidebar/Sidebar.js"></script>
        <script src="components/ThemeCustomizer/ThemeCustomizer.js"></script>
        <script src="components/BookingManagement/MainLayout.js"></script>

        <script>
            document.addEventListener('alpine:init', () => {
                Alpine.data('statsData', () => ({
                    stats: {
                        active_products: 'not yet',
                        active_users: 'not yet',
                        active_vendors: 0,
                        banned_vendors: 0,
                        cancelled_orders: 0,
                        completed_orders: 0,
                        inactive_products: 'not yet',
                        inactive_users: 'not yet',
                        pending_commissions: 0,
                        pending_orders: 0,
                        pending_vendors: 0,
                        total_commissions: 0,
                        total_orders: 0,
                        total_products: 0,
                        total_sales: 0,
                        total_users: 0,
                        total_vendors: 0,
                    },

                    init() {
                        this.fetchStatsData();
                    },

                    async fetchStatsData() {
                        try {
                            const token = localStorage.getItem('authToken');
                            if (!token) {
                                window.location.href = 'auth-boxed-signin.html';
                                return;
                            }

                            const response = await fetch(`${API_CONFIG.BASE_URL_Renter}/api/admin/dashboard`, {
                                method: 'GET',
                                headers: {
                                    Accept: 'application/json',
                                    Authorization: `Bearer ${token}`,
                                },
                            });

                            if (!response.ok) {
                                throw new Error(`HTTP error! status: ${response.status}`);
                            }

                            const data = await response.json();

                            if (data.success && data.data.stats) {
                                const stats = data.data.stats;

                                // Group related statistics for easier chart usage
                                this.statsGroups = {
                                    // User Statistics
                                    users: {
                                        active: stats.active_users,
                                        inactive: stats.inactive_users,
                                        total: stats.total_users,
                                    },

                                    // Vendor Statistics
                                    vendors: {
                                        active: stats.active_vendors,
                                        pending: stats.pending_vendors,
                                        banned: stats.banned_vendors,
                                        total: stats.total_vendors,
                                    },

                                    // Driver Statistics
                                    drivers: {
                                        active: stats.active_Driver,
                                        pending: stats.pending_Driver,
                                        banned: stats.banned_Driver,
                                        total: stats.total_Driver,
                                    },

                                    // Service Provider Statistics
                                    serviceProviders: {
                                        active: stats.active_service_provider,
                                        pending: stats.pending_service_provider,
                                        banned: stats.banned_service_provider,
                                        total: stats.total_service_provider,
                                    },

                                    // Product Statistics
                                    products: {
                                        active: stats.active_products,
                                        inactive: stats.inactive_products,
                                        total: stats.total_products,
                                        byProviderType: stats.products_stats?.by_provider_type || {
                                            product_providers: 0,
                                            service_providers: 0,
                                        },
                                    },

                                    // Order Statistics
                                    orders: {
                                        pending: stats.pending_orders,
                                        completed: stats.completed_orders,
                                        cancelled: stats.cancelled_orders,
                                        total: stats.total_orders,
                                        totalSales: stats.total_sales,
                                    },

                                    // Commission Statistics
                                    commissions: {
                                        pending: stats.pending_commissions,
                                        total: stats.total_commissions,
                                    },
                                };

                                // You can now access these grouped stats for your charts

                                // Example usage for a chart:
                                // this.prepareUserChart(this.statsGroups.users);
                                // this.prepareOrderChart(this.statsGroups.orders);
                            }
                        } catch (error) {
                            console.error('Error fetching stats:', error);
                        }
                    },
                    getPercentage(value, total) {
                        return total > 0 ? Math.round((value / total) * 100) : 0;
                    },
                }));
                // main section
                Alpine.data('scrollToTop', () => ({
                    showTopButton: false,
                    init() {
                        window.onscroll = () => {
                            this.scrollFunction();
                        };
                    },

                    scrollFunction() {
                        if (document.body.scrollTop > 50 || document.documentElement.scrollTop > 50) {
                            this.showTopButton = true;
                        } else {
                            this.showTopButton = false;
                        }
                    },

                    goToTop() {
                        document.body.scrollTop = 0;
                        document.documentElement.scrollTop = 0;
                    },
                }));

                Alpine.data('ordersStats', () => ({
                    orders: {
                        cancelled: 0,
                        completed: 0,
                        pending: 0,
                        total: 0,
                        totalSales: 0,
                    },
                    ordersChart: null,

                    async init() {
                        await this.fetchOrdersData();
                        this.initOrdersChart();
                    },

                    async fetchOrdersData() {
                        try {
                            const token = localStorage.getItem('authToken');
                            if (!token) {
                                window.location.href = 'auth-boxed-signin.html';
                                return;
                            }

                            const response = await fetch(`${API_CONFIG.BASE_URL_Renter}/api/admin/dashboard`, {
                                method: 'GET',
                                headers: {
                                    Accept: 'application/json',
                                    Authorization: `Bearer ${token}`,
                                },
                            });

                            if (!response.ok) {
                                throw new Error('Failed to fetch orders data');
                            }

                            const data = await response.json();

                            this.orders = {
                                cancelled: parseInt(data.stats.cancelled_orders) || 0,
                                completed: parseInt(data.stats.completed_orders) || 0,
                                pending: parseInt(data.stats.pending_orders) || 0,
                                total: parseInt(data.stats.total_orders) || 0,
                                totalSales: parseInt(data.stats.total_sales) || 0,
                            };
                        } catch (error) {
                            console.error('Error fetching orders data:', error);
                        }
                    },

                    initOrdersChart() {
                        setTimeout(() => {
                            if (this.ordersChart) {
                                this.ordersChart.destroy();
                            }

                            const options = {
                                series: [
                                    {
                                        name: 'Orders',
                                        data: [this.orders.pending, this.orders.completed, this.orders.cancelled],
                                    },
                                ],
                                chart: {
                                    height: 175,
                                    type: 'bar',
                                    fontFamily: 'Nunito, sans-serif',
                                    toolbar: {
                                        show: false,
                                    },
                                },
                                dataLabels: {
                                    enabled: false,
                                },
                                stroke: {
                                    show: true,
                                    width: 1,
                                    colors: ['transparent'],
                                },
                                colors: ['#FFC107', '#4CAF50', '#F44336'],
                                plotOptions: {
                                    bar: {
                                        horizontal: false,
                                        columnWidth: '30%',
                                        borderRadius: 5,
                                    },
                                },
                                xaxis: {
                                    categories: ['Pending', 'Completed', 'Cancelled'],
                                    labels: {
                                        style: {
                                            colors: isDark ? '#bfc9d4' : '#3b3f5c',
                                        },
                                    },
                                },
                                yaxis: {
                                    labels: {
                                        style: {
                                            colors: isDark ? '#bfc9d4' : '#3b3f5c',
                                        },
                                    },
                                },
                                grid: {
                                    borderColor: isDark ? '#191e3a' : '#e0e6ed',
                                },
                                fill: {
                                    opacity: 1,
                                },
                                tooltip: {
                                    y: {
                                        formatter: function (val) {
                                            return val + ' orders';
                                        },
                                    },
                                },
                            };

                            this.ordersChart = new ApexCharts(this.$refs.ordersChart, options);
                            this.ordersChart.render();
                        }, 300);
                    },
                }));
                Alpine.data('usersStats', () => ({
                    users: {
                        active: 0,
                        inactive: 0,
                        total: 0,
                    },

                    async init() {
                        await this.fetchUsersData();
                    },

                    async fetchUsersData() {
                        try {
                            const token = localStorage.getItem('authToken');
                            if (!token) {
                                window.location.href = 'auth-boxed-signin.html';
                                return;
                            }

                            const response = await fetch(`${API_CONFIG.BASE_URL_Renter}/api/admin/dashboard`, {
                                method: 'GET',
                                headers: {
                                    Accept: 'application/json',
                                    Authorization: `Bearer ${token}`,
                                },
                            });

                            if (!response.ok) {
                                throw new Error('Failed to fetch data');
                            }

                            const data = await response.json();

                            this.users = {
                                active: data.stats.active_users === 'not yet' ? 0 : parseInt(data.stats.active_users),
                                inactive: data.stats.inactive_users === 'not yet' ? 0 : parseInt(data.stats.inactive_users),
                                total: parseInt(data.stats.total_users),
                            };
                        } catch (error) {
                            console.error('Error fetching users data:', error);
                        }
                    },

                    calculatePercentage(partial, total) {
                        return total > 0 ? Math.round((partial / total) * 100) : 0;
                    },
                }));
                Alpine.data('sales', () => ({
                    vendors: {},
                    apiBaseUrl: API_CONFIG.BASE_URL_Renter,

                    init() {
                        isDark = this.$store.app.theme === 'dark' || this.$store.app.isDarkMode ? true : false;
                        isRtl = this.$store.app.rtlClass === 'rtl' ? true : false;
                        this.fetchDashboardData();

                        const salesByCategory = null;
                        const totalOrders = null;

                        // revenue

                        this.$watch('$store.app.theme', () => {
                            isDark = this.$store.app.theme === 'dark' || this.$store.app.isDarkMode ? true : false;

                            this.salesByCategory.updateOptions(this.salesByCategoryOptions);
                            this.dailySales.updateOptions(this.dailySalesOptions);
                            this.totalOrders.updateOptions(this.totalOrdersOptions);
                        });

                        this.$watch('$store.app.rtlClass', () => {
                            isRtl = this.$store.app.rtlClass === 'rtl' ? true : false;
                        });
                    },

                    async fetchDashboardData() {
                        const token = localStorage.getItem('authToken');
                        if (!token) {
                            window.location.href = 'auth-boxed-signin.html';
                            return;
                        }
                        try {
                            const response = await fetch(`${API_CONFIG.BASE_URL_Renter}/api/admin/dashboard`, {
                                method: 'GET',
                                headers: {
                                    Accept: 'application/json',
                                    Authorization: `Bearer ${token}`,
                                },
                            });

                            const data = await response.json();

                            // Group related statistics for easier chart usage
                            const statsGroups = {
                                // User Statistics
                                users: {
                                    active: data.stats.active_users,
                                    inactive: data.stats.inactive_users,
                                    total: data.stats.total_users,
                                },

                                // Vendor Statistics
                                vendors: {
                                    active: data.stats.active_vendors,
                                    pending: data.stats.pending_vendors,
                                    banned: data.stats.banned_vendors,
                                    total: data.stats.total_vendors,
                                },

                                // Driver Statistics
                                drivers: {
                                    active: data.stats.active_Driver,
                                    pending: data.stats.pending_Driver,
                                    banned: data.stats.banned_Driver,
                                    total: data.stats.total_Driver,
                                },

                                // Service Provider Statistics
                                serviceProviders: {
                                    active: data.stats.active_service_provider,
                                    pending: data.stats.pending_service_provider,
                                    banned: data.stats.banned_service_provider,
                                    total: data.stats.total_service_provider,
                                },

                                // Product Statistics
                                products: {
                                    active: data.stats.active_products,
                                    inactive: data.stats.inactive_products,
                                    total: data.stats.products_stats.total_products,
                                    byProviderType: data.stats.products_stats?.by_provider_type || {
                                        product_providers: 0,
                                        service_providers: 0,
                                    },
                                },

                                // Order Statistics
                                orders: {
                                    pending: data.stats.pending_orders,
                                    completed: data.stats.completed_orders,
                                    cancelled: data.stats.cancelled_orders,
                                    total: data.stats.total_orders,
                                    totalSales: data.stats.total_sales,
                                },

                                // Commission Statistics
                                commissions: {
                                    pending: data.stats.pending_commissions,
                                    total: data.stats.total_commissions,
                                },
                            };
                            this.vendors = statsGroups.vendors;

                            this.updateChartsData(statsGroups);

                            // You can now access these grouped stats for your charts

                            // Example usage for a chart:
                        } catch (error) {}
                    },

                    getVendorsChartOptions(vendorsData) {
                        return {
                            series: [vendorsData.active, vendorsData.pending, vendorsData.banned],
                            chart: {
                                type: 'donut',
                                height: 460,
                                fontFamily: 'Nunito, sans-serif',
                            },
                            labels: ['Active', 'Pending', 'Banned'],
                            dataLabels: {
                                enabled: false,
                            },
                            stroke: {
                                show: true,
                                width: 25,
                                colors: isDark ? ['#0e1726', '#0e1726', '#0e1726'] : ['#fff', '#fff', '#fff'],
                            },
                            colors: isDark ? ['#5c1ac3', '#e2a03f', '#e7515a'] : ['#5c1ac3', '#e2a03f', '#e7515a'],
                            plotOptions: {
                                pie: {
                                    donut: {
                                        size: '65%',
                                        background: 'transparent',
                                        labels: {
                                            show: true,
                                            name: {
                                                show: true,
                                                fontSize: '29px',
                                                offsetY: -10,
                                            },
                                            value: {
                                                show: true,
                                                fontSize: '26px',
                                                color: isDark ? '#bfc9d4' : undefined,
                                                offsetY: 16,
                                                formatter: (val) => {
                                                    return val;
                                                },
                                            },
                                            total: {
                                                show: true,
                                                label: 'Total',
                                                color: '#888ea8',
                                                fontSize: '29px',
                                                formatter: (w) => {
                                                    return w.globals.seriesTotals.reduce((a, b) => a + b, 0);
                                                },
                                            },
                                        },
                                    },
                                },
                            },
                            states: {
                                hover: {
                                    filter: {
                                        type: 'none',
                                        value: 0.15,
                                    },
                                },
                                active: {
                                    filter: {
                                        type: 'none',
                                        value: 0.15,
                                    },
                                },
                            },
                        };
                    },
                    updateChartsData(dashboardData) {
                        try {
                            const destroyChart = (chartInstance, refName) => {
                                if (chartInstance) {
                                    chartInstance.destroy();
                                    const refElement = this.$refs[refName];
                                    if (refElement && refElement.innerHTML) {
                                        refElement.innerHTML = '';
                                    }
                                }
                            };

                            destroyChart(this.salesByCategory, 'salesByCategory');
                            destroyChart(this.dailySales, 'dailySales');
                            destroyChart(this.vendorsChart, 'vendorsChart');

                            setTimeout(() => {
                                const createChart = (refName, chartOptions) => {
                                    if (!this.$refs || !this.$refs[refName]) {
                                        return null;
                                    }

                                    const element = this.$refs[refName];
                                    element.innerHTML = '';

                                    const chart = new ApexCharts(element, chartOptions);
                                    chart.render();
                                    return chart;
                                };

                                this.salesByCategory = createChart('salesByCategory', this.getSalesByCategoryOptions(dashboardData.orders));

                                this.dailySales = createChart('dailySales', this.getDailySalesOptions(dashboardData.users));

                                this.vendorsChart = createChart('vendorsChart', this.getVendorsChartOptions(dashboardData.vendors));
                            }, 300);
                        } catch (error) {
                            console.error('Error updating charts:', error);
                        }
                    },
                    getSalesByCategoryOptions(ordersByType) {
                        const x = { cancel: ordersByType.cancelled_orders, completed: ordersByType.completed_orders, pending: ordersByType.pending_orders };
                        const labels = Object.keys(x);
                        const series = Object.values(x);

                        return {
                            series: series,
                            chart: {
                                type: 'donut',
                                height: 460,
                                fontFamily: 'Nunito, sans-serif',
                            },
                            labels: labels,
                            dataLabels: {
                                enabled: false,
                            },
                            stroke: {
                                show: true,
                                width: 25,
                                colors: isDark ? ['#0e1726', '#0e1726', '#0e1726', '#0e1726'] : ['#fff', '#fff', '#fff'],
                            },
                            colors: isDark ? ['#5c1ac3', '#e2a03f', '#e7515a', '#e2a03f'] : ['#e2a03f', '#5c1ac3', '#e7515a'],
                            plotOptions: {
                                pie: {
                                    donut: {
                                        size: '65%',
                                        background: 'transparent',
                                        labels: {
                                            show: true,
                                            name: {
                                                show: true,
                                                fontSize: '29px',
                                                offsetY: -10,
                                            },
                                            value: {
                                                show: true,
                                                fontSize: '26px',
                                                color: isDark ? '#bfc9d4' : undefined,
                                                offsetY: 16,
                                                formatter: (val) => {
                                                    return val;
                                                },
                                            },
                                            total: {
                                                show: true,
                                                label: 'Total',
                                                color: '#888ea8',
                                                fontSize: '29px',
                                                formatter: (w) => {
                                                    return w.globals.seriesTotals.reduce(function (a, b) {
                                                        return a + b;
                                                    }, 0);
                                                },
                                            },
                                        },
                                    },
                                },
                            },

                            states: {
                                hover: {
                                    filter: {
                                        type: 'none',
                                        value: 0.15,
                                    },
                                },
                                active: {
                                    filter: {
                                        type: 'none',
                                        value: 0.15,
                                    },
                                },
                            },
                        };
                    },
                    getDailySalesOptions(ordersByStatus) {
                        const labels = Object.keys(ordersByStatus);
                        const seriesData = Object.values(ordersByStatus);

                        return {
                            series: [
                                {
                                    name: 'Person',
                                    data: seriesData,
                                },
                            ],
                            chart: {
                                height: 220,
                                type: 'bar',
                                fontFamily: 'Nunito, sans-serif',
                                toolbar: {
                                    show: false,
                                },
                            },
                            dataLabels: {
                                enabled: false,
                            },
                            stroke: {
                                show: true,
                                width: 1,
                            },
                            colors: ['#e2a03f', '#e0e6ed'],
                            responsive: [
                                {
                                    breakpoint: 480,
                                    options: {
                                        legend: {
                                            position: 'bottom',
                                            offsetX: -10,
                                            offsetY: 0,
                                        },
                                    },
                                },
                            ],

                            yaxis: {
                                show: false,
                            },
                            fill: {
                                opacity: 1,
                            },
                            plotOptions: {
                                bar: {
                                    horizontal: false,
                                    columnWidth: '25%',
                                },
                            },
                            legend: {
                                show: false,
                            },

                            xaxis: {
                                labels: {
                                    show: false,
                                },
                                categories: labels,
                            },
                        };
                    },

                    updateChartsTheme() {
                        if (this.salesByCategory) {
                            this.salesByCategory.updateOptions({
                                colors: isDark ? ['#5c1ac3', '#e2a03f', '#e7515a', '#e2a03f'] : ['#e2a03f', '#5c1ac3', '#e7515a'],
                            });
                        }
                        if (this.dailySales) {
                            // Update daily sales theme if needed
                        }
                        if (this.totalOrders) {
                            this.totalOrders.updateOptions({
                                colors: isDark ? ['#00ab55'] : ['#00ab55'],
                            });
                        }
                        if (this.vendorsChart) {
                            this.vendorsChart.updateOptions({
                                colors: isDark ? ['#5c1ac3', '#e2a03f', '#e7515a'] : ['#5c1ac3', '#e2a03f', '#e7515a'],
                            });
                        }
                    }, // revenue
                }));
                Alpine.data('serviceProvidersStats', () => ({
                    serviceProviders: {
                        active: 0,
                        banned: 0,
                        pending: 0,
                        total: 0,
                    },

                    async init() {
                        await this.fetchServiceProvidersData();
                    },

                    async fetchServiceProvidersData() {
                        try {
                            const token = localStorage.getItem('authToken');
                            if (!token) {
                                window.location.href = 'auth-boxed-signin.html';
                                return;
                            }

                            const response = await fetch(`${API_CONFIG.BASE_URL_Renter}/api/admin/dashboard`, {
                                method: 'GET',
                                headers: {
                                    Accept: 'application/json',
                                    Authorization: `Bearer ${token}`,
                                },
                            });

                            if (!response.ok) {
                                throw new Error('Failed to fetch service providers data');
                            }

                            const data = await response.json();

                            this.serviceProviders = {
                                active: parseInt(data.stats.active_service_provider) || 0,
                                banned: parseInt(data.stats.banned_service_provider) || 0,
                                pending: parseInt(data.stats.pending_service_provider) || 0,
                                total: parseInt(data.stats.total_service_provider) || 0,
                            };
                        } catch (error) {
                            console.error('Error fetching service providers data:', error);
                        }
                    },

                    calculatePercentage(partial, total) {
                        return total > 0 ? Math.round((partial / total) * 100) : 0;
                    },
                }));
                Alpine.data('commissionsStats', () => ({
                    commissions: {
                        pending: 0,
                        total: 0,
                    },

                    async init() {
                        await this.fetchCommissionsData();
                    },

                    async fetchCommissionsData() {
                        try {
                            const token = localStorage.getItem('authToken');
                            if (!token) {
                                window.location.href = 'auth-boxed-signin.html';
                                return;
                            }

                            const response = await fetch(`${API_CONFIG.BASE_URL_Renter}/api/admin/dashboard`, {
                                method: 'GET',
                                headers: {
                                    Accept: 'application/json',
                                    Authorization: `Bearer ${token}`,
                                },
                            });

                            if (!response.ok) {
                                throw new Error('Failed to fetch commissions data');
                            }

                            const data = await response.json();

                            this.commissions = {
                                pending: parseInt(data.stats.pending_commissions) || 0,
                                total: parseInt(data.stats.total_commissions) || 0,
                            };
                        } catch (error) {
                            console.error('Error fetching commissions data:', error);
                        }
                    },

                    calculatePercentage(partial, total) {
                        return total > 0 ? Math.round((partial / total) * 100) : 0;
                    },
                }));
                Alpine.data('productsStats', () => ({
                    products: {
                        active: 'not yet',
                        inactive: 'not yet',
                        total: 0,
                        byProviderType: {
                            product_providers: 0,
                            service_providers: 0,
                        },
                    },

                    async init() {
                        await this.fetchProductsData();
                    },

                    async fetchProductsData() {
                        try {
                            const token = localStorage.getItem('authToken');
                            if (!token) {
                                window.location.href = 'auth-boxed-signin.html';
                                return;
                            }

                            const response = await fetch(`${API_CONFIG.BASE_URL_Renter}/api/admin/dashboard`, {
                                method: 'GET',
                                headers: {
                                    Accept: 'application/json',
                                    Authorization: `Bearer ${token}`,
                                },
                            });

                            if (!response.ok) {
                                throw new Error('Failed to fetch products data');
                            }

                            const data = await response.json();

                            this.products = {
                                active: data.stats.active_products || 'not yet',
                                inactive: data.stats.inactive_products || 'not yet',
                                total: parseInt(data.stats.total_products) || 0,
                                byProviderType: {
                                    product_providers: parseInt(data.stats.products_stats?.by_provider_type?.product_providers) || 0,
                                    service_providers: parseInt(data.stats.products_stats?.by_provider_type?.service_providers) || 0,
                                },
                            };
                        } catch (error) {
                            console.error('Error fetching products data:', error);
                        }
                    },
                }));
            });
        </script>
    </body>
</html>
